<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Near-multicall</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="././assets/css/mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="getting-started/introduction.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="getting-started/onboarding.html"><strong aria-hidden="true">1.1.</strong> Onboarding</a></li><li class="chapter-item expanded "><a href="getting-started/make-proposals.html"><strong aria-hidden="true">1.2.</strong> Make Proposals</a></li><li class="chapter-item expanded "><a href="getting-started/view-proposals.html"><strong aria-hidden="true">1.3.</strong> View Proposals</a></li></ol></li><li class="chapter-item expanded "><a href="dao-login.html"><strong aria-hidden="true">2.</strong> DAO login</a></li><li class="chapter-item expanded "><a href="contracts/overview.html"><strong aria-hidden="true">3.</strong> Contracts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="contracts/factory.html"><strong aria-hidden="true">3.1.</strong> Factory</a></li><li class="chapter-item expanded "><a href="contracts/instance.html"><strong aria-hidden="true">3.2.</strong> Instance</a></li></ol></li><li class="chapter-item expanded "><a href="links.html"><strong aria-hidden="true">4.</strong> Links</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Near-multicall</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Before starting to use near-multicall for making DAO proposals, we first need to establish a general understanding of how it works. </p>
<h2 id="the-multicall-instance-mi"><a class="header" href="#the-multicall-instance-mi">The multicall instance (MI)</a></h2>
<p>The regular DAO contract (SputnikDAO) can only call one target contract per proposal. That's why for proposals that call multiple smart contracts, we need a proxy contract that will handle all desired function calls. Multicall instances serve this purpose. Every DAO has its own private multicall instance to work with. 
<img src="https://i.imgur.com/jUgiHru.png" alt="" />
In a multicall proposal, the DAO calls its MI and passes it some instructions, the MI will follow those instructions to call the desired functions on the target contracts.</p>
<div id="admonition-info" class="admonition info">
<div class="admonition-title">
<p>Info</p>
<p><a class="admonition-anchor-link" href="getting-started/introduction.html#admonition-info"></a></p>
</div>
<div>
<p>The MI address is always derived from the DAO address. It's easy to explain it with an example:
If the DAO address is <code>marmaj.sputnik-dao.near</code> then it will have a MI deployed at <code>marmaj.v1.multicall.near</code></p>
</div>
</div>
<p>DAOs need to create a multicall instance (MI) before using it for the first time. You can think of this as an installation step that only happens once. Instructions for this can be found on the <a href="getting-started/onboarding.html">onboarding guide</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="onboard-your-dao"><a class="header" href="#onboard-your-dao">Onboard your DAO</a></h1>
<div id="admonition-note" class="admonition note">
<div class="admonition-title">
<p>Note</p>
<p><a class="admonition-anchor-link" href="getting-started/onboarding.html#admonition-note"></a></p>
</div>
<div>
<p>In order to create a multicall instance for your DAO, you must have permissions to create function-call proposals on the DAO.</p>
</div>
</div>
<ol>
<li>Go to <a href="https://multicall.app/#/dao" target="_blank">https://multicall.app/#/dao</a></li>
<li>In the lower left hand corner log in with your wallet (1.) and select the DAO you would like to use multicall with (2.).</li>
</ol>
<p><img src="https://i.imgur.com/PiS2KTW.png" alt="" /></p>
<div id="admonition-tip" class="admonition tip">
<div class="admonition-title">
<p>Tip</p>
<p><a class="admonition-anchor-link" href="getting-started/onboarding.html#admonition-tip"></a></p>
</div>
<div>
<p>If the DAO symbol lights up red, the address is not a valid dao address - please check for typos. Instead the symbol should be yellow, indicating that while the DAO exists, there is no belonging multicall instance yet.</p>
</div>
</div>
<ol start="3">
<li>In the middle of the page you see requirements that need to be met in order to create a multicall instance for the specified dao. If all except &quot;<em>DAO has no multicall instance</em>&quot; are met, a green button shows up, click it to propose a multicall creation proposal.</li>
</ol>
<p><img src="https://i.imgur.com/9fntsfD.png" alt="" /></p>
<p>The website will also show a blue button, if a creation proposal already exists, click it to vote yes (You can also vote using AstroDAO).</p>
<p><img src="https://i.imgur.com/mQpHGcu.png" alt="" /></p>
<ol start="4">
<li>Once the proposal passes, a multicall instance will be deployed to <strong>[daoâ€‘name].v1.multicall.near</strong>. If a multicall instance exists for the chosen DAO, the website will display its state, such as whitelisted tokens and job bond.</li>
</ol>
<p><img src="https://i.imgur.com/IIQYxOs.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="make-a-multicall-proposal"><a class="header" href="#make-a-multicall-proposal">Make a multicall proposal</a></h1>
<p><a href="https://multicall.app/#/dao" target="_blank">Our website</a> offers a space to build your proposals. Simply drag a <em>card</em> from the side menu into the column in the middle of the page. This column will contain the instructions given to the Multicall Instance (MI), and they are executed in <strong>sequence</strong> from top to bottom. For advanced usage, you can add more columns by clicking the <em>+</em> icon on top of the columns. The instructions in all columns will run <strong>concurrently</strong>.</p>
<p><img src="https://i.imgur.com/UtFmnOt.gif" alt="" /></p>
<p>Let's talk a little about the cards. Cards serve as building blocks of the proposal. They hold information about what contract and function to call with what parameters. Click the pen icon (<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" /><span class="material-symbols-outlined">
edit</span>) in the top right corner of a card to open the card's editor where you specify the required parameter. Any interaction can be modeled using the custom card, but we're always expanding our selection of cards for sepecific purposes to lower the technical barriers for users.</p>
<div id="admonition-info" class="admonition info">
<div class="admonition-title">
<p>Info</p>
<p><a class="admonition-anchor-link" href="getting-started/make-proposals.html#admonition-info"></a></p>
</div>
<div>
<p>Think we're missing an important card? Let us know on our <a href="https://discord.gg/wc6T6bPvdr" target="_blank">Discord</a> !</p>
</div>
</div>
<p>Once you are satisfied with your proposal, click on the <em>Export</em> tab in the side menu. You will be asked to put a proposal description that will be displayed on AstroDao. If everything is fine, i.e. you don't have any unresolved input errors and you have the rights to make proposals on the DAO, the propose button at the bottom of the menu will turn green. Click it to make the proposal on the DAO.</p>
<div id="admonition-note" class="admonition note">
<div class="admonition-title">
<p>Note</p>
<p><a class="admonition-anchor-link" href="getting-started/make-proposals.html#admonition-note"></a></p>
</div>
<div>
<p>A small amount of NEAR will be required to make the transaction. It represents a proposal bond paid to the DAO, and will be reimbursed once your DAO proposal is approved. The amount is set in the DAO configuration, near-multicall does not charge any fees.</p>
</div>
</div>
<h2 id="dealing-with-funds"><a class="header" href="#dealing-with-funds">Dealing with funds</a></h2>
<p>As we have seen in <em><a href="getting-started/introduction.html#the-multicall-instance-mi">The multicall instance</a></em> the MI serves as a proxy contract for the DAO. Since the DAO and MI are not the same contract, the MI cannot access funds belonging to the DAO. This is a good thing when it comes to security, but does bring some inconveniences. Any funds that are need for a multicall proposal should be transferred to the MI prior to the execution of said proposal. We suggest to have a small tokens' allowance on the MI for quick access, while keeping the main DAO's treasury on the DAO. The funds on the MI are only accessible by the MI admins (per default, only the DAO).</p>
<div id="admonition-caution" class="admonition warning">
<div class="admonition-title">
<p>Caution</p>
<p><a class="admonition-anchor-link" href="getting-started/make-proposals.html#admonition-caution"></a></p>
</div>
<div>
<p>Near-multicall is a beta software and we do not guarantee the safety of assets on the MI. Our contracts are open source, and can be found on <a href="https://github.com/near-multicall/contracts" target="_blank">this repository</a>. Use at your own risk.</p>
</div>
</div>
<p><img src="https://i.imgur.com/myT7aaY.png" alt="" /></p>
<p>You can easily see the available funds on the MI via the <em>Funds</em> tab on the <a href="https://multicall.app/#/dao" target="_blank"><i>DAO page</i></a>.<br />
When making a multicall proposal, keep in mind that the actions will be called from the MI's address, and not the DAO address. Say you want to interact with a Dapp, it will be the MI's Dapp account that is used, not the DAO's.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="view-a-multicall-proposal"><a class="header" href="#view-a-multicall-proposal">View a multicall proposal</a></h1>
<p>After creating a proposal, the next step is for other DAO members to review it and vote on it. However, the way multicall proposals are displayed on AstroDAO (or other generic DAO frotends) isn't human-friendly. As an example, can you tell what the following proposal does?</p>
<p><img src="https://i.imgur.com/hwCEPqW.png" alt="" /></p>
<h2 id="visualizing-proposals"><a class="header" href="#visualizing-proposals">Visualizing proposals</a></h2>
<p>It is <strong>really</strong> important to understand proposals before voting on them. Hence, the need to parse their arguments and display them in a more intuitive way. You can use the multicall UI to visualize a proposal by just copying the proposal's link and pasting it into the &quot;<strong>load from proposal</strong>&quot; dialog. The following GIF demonstrates that:</p>
<p><img src="https://i.imgur.com/NUwcils.gif" alt="" /></p>
<div id="admonition-hint" class="admonition tip">
<div class="admonition-title">
<p>Hint</p>
<p><a class="admonition-anchor-link" href="getting-started/view-proposals.html#admonition-hint"></a></p>
</div>
<div>
<p>We currently support proposal links from both <a href="https://astrodao.com/">AstroDAO</a> and the base <a href="https://v2.sputnik.fund/">Sputnik UI</a>.
We're also open to supporting more UIs as well, so send us your suggestions!</p>
</div>
</div>
<p>Another use case for this feature is the creation of templates: If you want to create a proposal that's very similar to another proposal that you or someone else made in the past (regardless of which DAO it happened on), then why start from scratch? Instead, load the old proposal and apply your changes on top of it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dao-login"><a class="header" href="#dao-login">DAO login</a></h1>
<p>Near-multicall allows DAOs to interact more freely with other DApps on NEAR. However, it's not always easy to see the results of these interactions. DApp interfaces provide invaluable information to their users, such as:</p>
<ul>
<li>Overview of Defi positions </li>
<li>View into pending or unclaimed rewards</li>
<li>Usage history and statistics</li>
</ul>
<p>Hence the need for DAO members to login into DApps using their DAO's address.</p>
<h2 id="heres-how-to-do-it"><a class="header" href="#heres-how-to-do-it">Here's how to do it:</a></h2>
<ol>
<li>Open the DApp to be used. Example: <a href="https://app.ref.finance/">Ref-finance</a></li>
<li>If you're already logged in with your personal wallet there, Log out.</li>
<li>On Ref, click login, choose NEAR wallet, and then close that tab.</li>
<li>Open <a href="https:///www.multicall.app/#/app/">Multicall</a> on a seperate tab. </li>
<li>Click the DAO/Multicall login dialog.</li>
<li>Paste the DApp URL in the input field.</li>
<li>Click on Proceed.</li>
</ol>
<p>Here's a GIF going over the same steps using <a href="https://app.ref.finance/">Ref-finance</a></p>
<p><img src="https://i.imgur.com/xv2BMVn.gif" alt="" /></p>
<div id="admonition-note" class="admonition note">
<div class="admonition-title">
<p>Note</p>
<p><a class="admonition-anchor-link" href="dao-login.html#admonition-note"></a></p>
</div>
<div>
<ul>
<li>This only works with DApps that support either <a href="https://wallet.near.org/">NEAR wallet</a> or <a href="https://mynearwallet.com/">MyNearWallet</a></li>
<li>Login will be in &quot;read-only&quot; mode, so the DAO's account will not initiate transactions using the DApp's interface</li>
</ul>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="smart-contracts"><a class="header" href="#smart-contracts">Smart contracts</a></h1>
<p>The project has 2 contracts: the Multicall Instance (MI) and a factory contract for spinning-up instances.
Both contracts are written using <a href="https://www.assemblyscript.org/" target="_blank">AssemblyScript</a> and are open-source. Code can be found on our <a href="https://github.com/near-multicall/contracts" target="_blank">contracts repository</a>.</p>
<h2 id="deployments"><a class="header" href="#deployments">Deployments</a></h2>
<h3 id="near-mainnet"><a class="header" href="#near-mainnet">NEAR Mainnet</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Contract</th><th>Address</th><th>Code hash</th></tr></thead><tbody>
<tr><td>Factory</td><td><a href="https://explorer.near.org/accounts/v1.multicall.near"><code>v1.multicall.near</code></a></td><td><code>2Y3VuVZTPaXGBnRj6Av9ymKM17iSGv1b1xJTsdkrmSFh</code></td></tr>
</tbody></table>
</div>
<h3 id="near-testnet"><a class="header" href="#near-testnet">NEAR Testnet</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Contract</th><th>Address</th><th>Code hash</th></tr></thead><tbody>
<tr><td>Factory</td><td><a href="https://explorer.testnet.near.org/accounts/v1_03.multicall.testnet"><code>v1_03.multicall.testnet</code></a></td><td><code>2Y3VuVZTPaXGBnRj6Av9ymKM17iSGv1b1xJTsdkrmSFh</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="the-factory-contract"><a class="header" href="#the-factory-contract">The factory contract</a></h1>
<p>The main method on the factory contract is <code>create()</code>. It must be called from a DAO using a FunctionCall proposal.
Here's the singature of the method:</p>
<pre><code class="language-TypeScript">export function create(
    multicall_init_args: { 
        admin_accounts: string[];
        croncat_manager: string;
        job_bond: u128;
    },
    public_key: string = &quot;&quot;
): ContractPromiseBatch
</code></pre>
<ul>
<li><code>admin_accounts</code>: a list of NEAR accounts that will have absolute control over the instance, including its funds. We recommend that only the DAO is included here so the created instance only executes instructions approved by the DAO.</li>
<li><code>croncat_manager</code>: address of the <a href="https://cron.cat/" target="_blank">Croncat</a> manager contract. It is used by our scheduling features.</li>
<li><code>job_bond</code>: the job bond is the $NEAR amount to be paid by users wishing to submit scheduled multicall proposals to the DAO. The proposer will be re-imbursed upon approval of his proposal. By default we set it to be equal to the DAO's proposal bond.</li>
<li><code>public_key</code>: this is <strong>optional</strong>. When provided, this key will added as a <a href="https://docs.near.org/concepts/basics/accounts/access-keys#full-access-keys" target="_blank">fullAccess key</a> on the multicall instance. </li>
</ul>
<div id="admonition-important" class="admonition tip">
<div class="admonition-title">
<p>Important</p>
<p><a class="admonition-anchor-link" href="contracts/factory.html#admonition-important"></a></p>
</div>
<div>
<p>If a public key is provided, do not include the &quot;ed25519:&quot; prefix.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-instance-contract"><a class="header" href="#the-instance-contract">The instance contract</a></h1>
<p>This contract holds the core logic for multicall. Each DAO gets its own Multicall Instance (MI) contract to use. The contract consists of three main features:</p>
<ol>
<li>
<p>The <strong>main method</strong> in this contract is:<br />
<code>multicall ( calls: BatchCall[][] )</code><br />
It executes a bunch of <code>BatchCall</code> arrays.<br />
Each <code>BatchCall</code> has information for making a batch of function-calls: a target address and an array on function-calls to execute on that target. Each function-call has a function name, arguments encoded in base64, gas to use (u64 encoded as string) and amount of yoctoNEAR attached deposit (u128 encoded as string).<br />
Batches inside one array run one after another, as a promise chain.<br />
Different arrays of batches run in parallel.<br />
Example:</p>
<pre><code>calls = [
    [ Batch_11, Batch_12, Batch_13 ],
    [ Batch_21, Batch_22]
]
</code></pre>
<p>In this example we have 2 arrays of batches. In the first one <code>Batch_12</code> waits for <code>Batch_11</code> and <code>Batch_13</code> waits for <code>Batch_12</code>. In the second array <code>Batch_22</code> waits for <code>Batch_21</code>. Both arrays start executing in the same block and are independent of each other.</p>
</li>
<li>
<p><strong>Permissioned interactions</strong> with the contract through whitelisting of addresses:<br />
Due to the async nature of Near, funds can sit in the contract during multiple blocks awaiting the execution of cross-contract calls. To prevent stealing of funds, we require an address to be whitelisted before calling one of the contract's critical methods.
there are two main whitelists:<br />
<code>admins whitelist</code> holds addresses that can interact with the contract, they can add or remove others from the whitelist.<br />
<code>tokens whitelist</code> holds token addresses that can be attached to function calls, as the contract implements ft_on_transfer.<br />
The contract's address is whitelisted by default, this allows nesting multiple contract methods for convenience.</p>
</li>
<li>
<p><strong>Jobs</strong>:<br />
Multicall executions can be scheduled to run at a certain time in the future, made possible by integrating <a href="https://cron.cat/">croncat</a>. Anyone can register a job on the multicall contract, but an admin has to approve it. Admins can pause/resume job executions and also edit a job's multicall arguments.<br />
The following must be specified when creating a job:</p>
<pre><code class="language-ts">function job_add (
    job_multicalls: MulticallArgs[],
    job_cadence: string, // cron expression
    job_trigger_gas: u64,
    job_total_budget: u128,
    job_start_at: u64 = context.blockTimestamp
): u32 
</code></pre>
</li>
</ol>
<h2 id="example-calls"><a class="header" href="#example-calls">Example Calls</a></h2>
<h3 id="call-structure"><a class="header" href="#call-structure">Call structure</a></h3>
<p>example multicall arguments:</p>
<pre><code class="language-json=">{
    &quot;calls&quot;: [
        [ 
            {
                &quot;address&quot;: &quot;hello.lennczar.testnet&quot;,
                &quot;actions&quot;: [
                    {
                        &quot;func&quot;: &quot;hello&quot;,
                        &quot;args&quot;: &quot;eyJ0aGluZyI6IldvcmxkIn0=&quot;, // base64 encoding for {&quot;thing&quot;:&quot;World&quot;}
                        &quot;gas&quot;: &quot;10000000000000&quot;,
                        &quot;depo&quot;: &quot;0&quot;
                    },
                    {
                        &quot;func&quot;: &quot;hello&quot;,
                        &quot;args&quot;: &quot;eyJ0aGluZyI6IldvcmxkIn0=&quot;, // base64 encoding for {&quot;thing&quot;:&quot;World&quot;}
                        &quot;gas&quot;: &quot;10000000000000&quot;,
                        &quot;depo&quot;: &quot;0&quot;
                    }
                ]
            },
            {
                &quot;address&quot;: &quot;hello.lennczar.testnet&quot;,
                &quot;actions&quot;: [
                    {
                        &quot;func&quot;: &quot;hello&quot;,
                        &quot;args&quot;: &quot;eyJ0aGluZyI6IldvcmxkIn0=&quot;, // base64 encoding for {&quot;thing&quot;:&quot;World&quot;}
                        &quot;gas&quot;: &quot;10000000000000&quot;,
                        &quot;depo&quot;: &quot;0&quot;
                    }
                ]
            }
        ],
        [
            {
                &quot;address&quot;: &quot;hello.lennczar.testnet&quot;,
                &quot;actions&quot;: [
                    {
                        &quot;func&quot;: &quot;hello&quot;,
                        &quot;args&quot;: &quot;eyJ0aGluZyI6IldvcmxkIn0=&quot;, // base64 encoding for {&quot;thing&quot;:&quot;World&quot;}
                        &quot;gas&quot;: &quot;10000000000000&quot;,
                        &quot;depo&quot;: &quot;0&quot;
                    }
                ]
            }
        ]
    ]
}
</code></pre>
<p>This example calls the function <code>hello(thing: string): string</code> in the contract <code>hello.lennczar.testnet</code>.<br />
We see two arrays of batches: in the first array we have 2 batches that will be run as a promise chain (i.e. second batch will wait for the first batch). The first batch calls the function twice and the second batch calls it only once. In the second array we have one batch that calls the function once, it will run in parallel independently of the two previously mentioned batches.<br />
Running this results in the following <a href="https://explorer.testnet.near.org/transactions/HHEDj5FnRXJpGwR68PegHNWgpGjXcFWFyq2Nw27sDkx2">transaction</a>  </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="important-links"><a class="header" href="#important-links">Important links:</a></h1>
<ul>
<li><strong>Website (Mainnet):</strong> <a href="https://multicall.app/" target="_blank">https://multicall.app</a></li>
<li><strong>Website (Testnet):</strong> <a href="https://testnet.multicall.app/" target="_blank">https://testnet.multicall.app</a></li>
<li><strong>GitHub:</strong> <a href="https://github.com/near-multicall" target="_blank">https://github.com/near-multicall</a></li>
<li><strong>Twitter:</strong> <a href="https://twitter.com/near_multicall" target="_blank">https://twitter.com/near_multicall</a></li>
<li><strong>Discord:</strong> <a href="https://discord.gg/wc6T6bPvdr" target="_blank">https://discord.gg/wc6T6bPvdr</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
